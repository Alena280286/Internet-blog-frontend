<div class="article" *ngIf="article">
  <div class="container">

    <div class="article-content">

      <div class="article-head-part-image">
        <div class="blog-header">
          <div class="name-id-article">
            <div class="blog-teg"><span>Блог /</span> {{article.title}}</div>
          </div>
          <div class="article-title">
            {{article.title}}
          </div>
          <div class="article-description">
            {{article.description}}
          </div>
        </div>
        <div class="article-image" style="background-image: url('/assets/images/articles/{{article.image}}')"></div>
      </div>


      <div class="text-article-related">
        <div class="article-and-like">
          <div class="article-text" [innerHTML]="article.text">
            {{article.text}}
          </div>
          <div class="like-article">
            <div class="like-it">
              Понравилась статья? Поделитесь ею в своих социальных сетях!
            </div>
            <div class="social-icons">
              <a class="vk socials" href="https://vk.com/share.php?url=<{{article.url}}>" target="_blank">
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_14_131)">
                    <path
                      d="M5.73458 0.267334C2.73165 0.267334 0.267578 2.73141 0.267578 5.73434V24.2646C0.267578 27.2675 2.73165 29.7316 5.73458 29.7316H24.2649C27.2678 29.7316 29.7319 27.2675 29.7319 24.2646V5.73434C29.7319 2.73141 27.2678 0.267334 24.2649 0.267334H5.73458ZM5.73458 2.9459H24.2649C25.8186 2.9459 27.0533 4.18056 27.0533 5.73434V24.2646C27.0533 25.8184 25.8186 27.053 24.2649 27.053H5.73458C4.1808 27.053 2.94615 25.8184 2.94615 24.2646V5.73434C2.94615 4.18056 4.1808 2.9459 5.73458 2.9459ZM14.623 9.951C13.6395 9.94053 12.8025 9.951 12.3316 10.1812C12.0177 10.3329 11.7771 10.6782 11.9235 10.6939C12.1067 10.72 12.5199 10.809 12.7397 11.1072C13.0222 11.4891 13.0117 12.3523 13.0117 12.3523C13.0117 12.3523 13.1687 14.7274 12.6298 15.0256C12.2584 15.2297 11.7509 14.8164 10.6523 12.9278C10.0925 11.9547 9.66873 10.8822 9.66873 10.8822C9.66873 10.8822 9.59026 10.6834 9.44378 10.5788C9.2659 10.448 9.02002 10.4061 9.02002 10.4061L6.39899 10.4218C6.39899 10.4218 6.00663 10.4375 5.86537 10.6049C5.73458 10.7619 5.85491 11.0706 5.85491 11.0706C5.85491 11.0706 7.90569 15.8679 10.2285 18.2849C12.3578 20.5031 14.7748 20.3566 14.7748 20.3566H15.8734C15.8734 20.3566 16.203 20.32 16.3704 20.1421C16.5273 19.9747 16.5221 19.6608 16.5221 19.6608C16.5221 19.6608 16.5012 18.1907 17.1813 17.971C17.8562 17.7618 18.7141 19.394 19.6297 20.0218C20.3255 20.4979 20.8539 20.3932 20.8539 20.3932L23.3022 20.3566C23.3022 20.3566 24.5787 20.2781 23.9719 19.2684C23.9248 19.19 23.6214 18.5256 22.1565 17.1653C20.6184 15.7424 20.8225 15.9725 22.6745 13.5085C23.7992 12.007 24.2492 11.0915 24.1079 10.6939C23.9719 10.3224 23.1453 10.4218 23.1453 10.4218L20.3883 10.4375C20.3883 10.4375 20.1842 10.4114 20.0325 10.5003C19.886 10.5892 19.7918 10.7985 19.7918 10.7985C19.7918 10.7985 19.3524 11.9599 18.7717 12.9487C17.5475 15.0309 17.0505 15.146 16.8517 15.0152C16.3861 14.7117 16.5012 13.8014 16.5012 13.158C16.5012 11.1333 16.8098 10.2963 15.9048 10.0766C15.6066 10.0033 15.3869 9.95623 14.623 9.951Z"
                      fill="#B9D5FD"/>
                  </g>
                  <defs>
                    <clipPath id="clip0_14_131">
                      <rect width="30" height="30" fill="white"/>
                    </clipPath>
                  </defs>
                </svg>
              </a>
              <a class="fb socials"  href="https://www.facebook.com/?url=<{{article.url}}>" target="_blank">
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M14.9993 0.000488281C6.7298 0.000488281 -0.000732422 6.73102 -0.000732422 15.0005C-0.000732422 23.27 6.7298 30.0005 14.9993 30.0005C23.2687 30.0005 29.9993 23.27 29.9993 15.0005C29.9993 6.73102 23.2687 0.000488281 14.9993 0.000488281ZM14.9993 2.50049C21.9176 2.50049 27.4993 8.08212 27.4993 15.0005C27.4993 21.2847 22.8889 26.4521 16.8596 27.3491V18.6455H20.4192L20.9783 15.0298H16.8596V13.0547C16.8596 11.5534 17.3528 10.2202 18.7566 10.2202H21.0125V7.06592C20.6162 7.01217 19.7776 6.89502 18.1926 6.89502C14.8826 6.89502 12.9436 8.6425 12.9436 12.625V15.0298H9.54028V18.6455H12.9436V27.3174C7.01034 26.3388 2.49927 21.2168 2.49927 15.0005C2.49927 8.08212 8.0809 2.50049 14.9993 2.50049Z"
                    fill="#B9D5FD"/>
                </svg>
              </a>
              <a class="insta socials" href="https://www.instagram.com/?url=<{{article.url}}>" target="_blank">
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_14_133)">
                    <path
                      d="M8.93181 0.267334C4.1763 0.267334 0.268311 4.1701 0.268311 8.93084V21.0681C0.268311 25.8236 4.17107 29.7316 8.93181 29.7316H21.0691C25.8246 29.7316 29.7326 25.8289 29.7326 21.0681V8.93084C29.7326 4.17533 25.8298 0.267334 21.0691 0.267334H8.93181ZM8.93181 2.9459H21.0691C24.3807 2.9459 27.054 5.61924 27.054 8.93084V21.0681C27.054 24.3797 24.3807 27.053 21.0691 27.053H8.93181C5.62022 27.053 2.94688 24.3797 2.94688 21.0681V8.93084C2.94688 5.61924 5.62022 2.9459 8.93181 2.9459ZM22.9106 5.87559C22.2357 5.87559 21.6969 6.41445 21.6969 7.08932C21.6969 7.76419 22.2357 8.30305 22.9106 8.30305C23.5855 8.30305 24.1243 7.76419 24.1243 7.08932C24.1243 6.41445 23.5855 5.87559 22.9106 5.87559ZM15.0005 6.96376C10.5798 6.96376 6.96474 10.5788 6.96474 14.9995C6.96474 19.4202 10.5798 23.0352 15.0005 23.0352C19.4211 23.0352 23.0362 19.4202 23.0362 14.9995C23.0362 10.5788 19.4211 6.96376 15.0005 6.96376ZM15.0005 9.64233C17.9772 9.64233 20.3576 12.0227 20.3576 14.9995C20.3576 17.9762 17.9772 20.3566 15.0005 20.3566C12.0237 20.3566 9.64331 17.9762 9.64331 14.9995C9.64331 12.0227 12.0237 9.64233 15.0005 9.64233Z"
                      fill="#B9D5FD"/>
                  </g>
                  <defs>
                    <clipPath id="clip0_14_133">
                      <rect width="30" height="30" fill="white"/>
                    </clipPath>
                  </defs>
                </svg>
              </a>
            </div>
          </div>


          <div class="comment">
            <div class="comment-title">
              Комментарии к статье
            </div>

            <div class="no-comments" *ngIf="comments.length === 0">
              Комментариев пока нет
            </div>

            <div class="isLogged-user" *ngIf="isLogged">
              <div class="form-comment">
              <textarea [formControl]="commentControl" name="comment"
                        placeholder="Напишите Ваш комментарий к статье..."></textarea>
              </div>
              <button class="button btn-comment" [disabled]="!commentControl.value" (click)="submitComment()">
                Опубликовать комментарий
              </button>
            </div>

            <div class="logged-users" *ngIf="!isLogged">
              Чтобы оставлять комментарии, <a routerLink="/login">войдите</a>
              или <a routerLink="/signup">зарегистрируйтесь</a>.
            </div>
          </div>

          <div *ngIf="comments.length > 0">
            <div class="comment-user-block" *ngFor="let comment of comments">
              <div class="icons-text-date">
                <div class="icons-bg">
                  <div class="icon-user">
                    <svg width="44" height="45" viewBox="0 0 44 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="21.9751" cy="12.7368" r="11.7368" stroke="#709FDC" stroke-width="2"/>
                      <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M41.942 45.0001C41.3422 34.4932 32.632 26.158 21.9749 26.158C11.3179 26.158 2.60766 34.4932 2.00789 45.0001H0.00488281C0.607003 33.388 10.2131 24.158 21.9749 24.158C33.7368 24.158 43.3429 33.388 43.945 45.0001H41.942Z"
                            fill="#709FDC"/>
                    </svg>
                  </div>
                </div>
                <div class="name-date">
                  <div class="name-user">
                    {{comment.user.name}}
                  </div>
                  <div class="date">
                    {{comment.date | date: 'dd.MM.yyyy HH:mm'}}
                  </div>
                </div>
              </div>
              <div class="comment-content">
                {{comment.text}}
              </div>

              <div class="actions">
                <div class="actions__action like" [class.active]="isLiked[comment.id]"
                     (click)=" applyCommentAction(comment,'like')">
                  <div class="actions__action-count">{{comment.likesCount}}</div>
                  <div class="actions__action-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M7.47998 18.35L10.58 20.75C10.98 21.15 11.88 21.35 12.48 21.35H16.28C17.48 21.35 18.78 20.45 19.08 19.25L21.48 11.95C21.98 10.55 21.08 9.34997 19.58 9.34997H15.58C14.98 9.34997 14.48 8.84997 14.58 8.14997L15.08 4.94997C15.28 4.04997 14.68 3.04997 13.78 2.74997C12.98 2.44997 11.98 2.84997 11.58 3.44997L7.47998 9.54997"
                        stroke="#071739" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M2.37988 18.35V8.55002C2.37988 7.15002 2.97988 6.65002 4.37988 6.65002H5.37988C6.77988 6.65002 7.37988 7.15002 7.37988 8.55002V18.35C7.37988 19.75 6.77988 20.25 5.37988 20.25H4.37988C2.97988 20.25 2.37988 19.75 2.37988 18.35Z"
                        stroke="#071739" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                </div>

                <div class="actions__action dislike" [class.active]="isDisliked[comment.id]"
                     (click)="applyCommentAction(comment, 'dislike')">
                  <div class="actions__action-count">{{comment.dislikesCount}}</div>
                  <div class="actions__action-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M16.5197 5.65002L13.4197 3.25002C13.0197 2.85002 12.1197 2.65002 11.5197 2.65002H7.71973C6.51973 2.65002 5.21973 3.55002 4.91973 4.75002L2.51973 12.05C2.01973 13.45 2.91973 14.65 4.41973 14.65H8.41973C9.01973 14.65 9.51973 15.15 9.41973 15.85L8.91973 19.05C8.71973 19.95 9.31973 20.95 10.2197 21.25C11.0197 21.55 12.0197 21.15 12.4197 20.55L16.5197 14.45"
                        stroke="#071739" stroke-width="1.5" stroke-miterlimit="10"/>
                      <path
                        d="M21.6201 5.65V15.45C21.6201 16.85 21.0201 17.35 19.6201 17.35H18.6201C17.2201 17.35 16.6201 16.85 16.6201 15.45V5.65C16.6201 4.25 17.2201 3.75 18.6201 3.75H19.6201C21.0201 3.75 21.6201 4.25 21.6201 5.65Z"
                        stroke="#071739" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                </div>

                <div class="actions__action" (click)="applyCommentAction(comment, 'violate')">
                  <div class="actions__action-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z"
                            stroke="#071739" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M12 8V13" stroke="#071739" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round"/>
                      <path d="M11.9946 16H12.0036" stroke="#071739" stroke-width="1.5" stroke-linecap="round"
                            stroke-linejoin="round"/>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="more-comments" *ngIf="comments.length > 0">
            <a class="text-more" *ngIf="hasMoreComments && !isLoading" (click)="showMoreComments()">
              Загрузить ещё комментарии
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M10 14C9.41668 14 8.83335 13.775 8.39168 13.3334L2.95835 7.90003C2.71668 7.65837 2.71668 7.25837 2.95835 7.0167C3.20002 6.77503 3.60002 6.77503 3.84168 7.0167L9.27502 12.45C9.67502 12.85 10.325 12.85 10.725 12.45L16.1583 7.0167C16.4 6.77503 16.8 6.77503 17.0417 7.0167C17.2833 7.25837 17.2833 7.65837 17.0417 7.90003L11.6083 13.3334C11.1667 13.775 10.5833 14 10 14Z"
                  fill="#709FDC"/>
              </svg>
            </a>
            <mat-spinner class="spinner" *ngIf="isLoading"></mat-spinner>
          </div>

        </div>

        <div class="read-also">
          <div class="title-read-also">
            Читайте также:
          </div>
          <article-cards class="read-also-card" *ngFor="let article of articleRelated"
                         [articles]="article">
          </article-cards>
        </div>
      </div>
    </div>

  </div>
</div>


